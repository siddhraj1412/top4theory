<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top 4 Theory - Cinema Level Calculator</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üé¨</text></svg>">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6MXK1C0WSL"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-6MXK1C0WSL');
    </script>
    
    <!-- html2canvas for screenshots -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <div class="background-gradient"></div>
    
    <div class="container">
        <header class="header">
            <h1 class="logo">üé¨ Top 4 <span class="highlight">Theory</span></h1>
            <p class="tagline">Discover your true Cinema Level based on your favorite films</p>
            <a href="https://letterboxd.com/SiddhrajThakor/" target="_blank" class="creator-badge">
                by @SiddhrajThakor
            </a>
        </header>

        <div class="movie-selection-section">
            <h2 class="selection-title">üé• Select Your Top 4 Favorite Films</h2>
            <p class="selection-subtitle">Search and select your 4 favorite movies of all time</p>
            
            <!-- Search Overlay -->
            <div class="search-overlay" id="searchOverlay" onclick="closeSearch()"></div>
            
            <!-- Global Search Modal -->
            <div class="search-container" id="searchModal">
                <input type="text" class="movie-search" id="movieSearchInput" placeholder="Type a movie name..." autocomplete="off">
                <div class="search-results" id="searchResults"></div>
            </div>
            
            <div class="movie-slots">
                <!-- Slot 1 -->
                <div class="movie-slot" data-slot="1" onclick="openSearch(1)">
                    <div class="slot-number">1</div>
                    <div class="slot-content empty" id="slot-1">
                        <div class="empty-state">
                            <span class="empty-icon">üé¨</span>
                            <span class="empty-text">Click to add movie</span>
                        </div>
                        <div class="selected-movie" style="display: none;">
                            <img class="selected-poster" src="" alt="">
                            <div class="selected-info">
                                <div class="selected-title"></div>
                                <div class="selected-year"></div>
                            </div>
                            <button class="remove-btn" onclick="event.stopPropagation(); removeMovie(1)">‚úï</button>
                        </div>
                    </div>
                </div>
                
                <!-- Slot 2 -->
                <div class="movie-slot" data-slot="2" onclick="openSearch(2)">
                    <div class="slot-number">2</div>
                    <div class="slot-content empty" id="slot-2">
                        <div class="empty-state">
                            <span class="empty-icon">üé¨</span>
                            <span class="empty-text">Click to add movie</span>
                        </div>
                        <div class="selected-movie" style="display: none;">
                            <img class="selected-poster" src="" alt="">
                            <div class="selected-info">
                                <div class="selected-title"></div>
                                <div class="selected-year"></div>
                            </div>
                            <button class="remove-btn" onclick="event.stopPropagation(); removeMovie(2)">‚úï</button>
                        </div>
                    </div>
                </div>
                
                <!-- Slot 3 -->
                <div class="movie-slot" data-slot="3" onclick="openSearch(3)">
                    <div class="slot-number">3</div>
                    <div class="slot-content empty" id="slot-3">
                        <div class="empty-state">
                            <span class="empty-icon">üé¨</span>
                            <span class="empty-text">Click to add movie</span>
                        </div>
                        <div class="selected-movie" style="display: none;">
                            <img class="selected-poster" src="" alt="">
                            <div class="selected-info">
                                <div class="selected-title"></div>
                                <div class="selected-year"></div>
                            </div>
                            <button class="remove-btn" onclick="event.stopPropagation(); removeMovie(3)">‚úï</button>
                        </div>
                    </div>
                </div>
                
                <!-- Slot 4 -->
                <div class="movie-slot" data-slot="4" onclick="openSearch(4)">
                    <div class="slot-number">4</div>
                    <div class="slot-content empty" id="slot-4">
                        <div class="empty-state">
                            <span class="empty-icon">üé¨</span>
                            <span class="empty-text">Click to add movie</span>
                        </div>
                        <div class="selected-movie" style="display: none;">
                            <img class="selected-poster" src="" alt="">
                            <div class="selected-info">
                                <div class="selected-title"></div>
                                <div class="selected-year"></div>
                            </div>
                            <button class="remove-btn" onclick="event.stopPropagation(); removeMovie(4)">‚úï</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="selection-counter">
                <span id="selectedCount">0</span>/4 films selected
            </div>
            
            <button onclick="analyzeTop4()" id="analyzeBtn" class="analyze-btn" disabled>
                <span class="btn-text">ANALYZE MY TOP 4</span>
                <span class="btn-loader hidden">‚è≥</span>
            </button>
        </div>

        <div id="error" class="error-box hidden"></div>

        <div id="result" class="result hidden">
            <div class="shareable-content" id="shareableContent">
                <!-- 1. LEVEL / RANK CARD -->
                <div class="rank-card" id="rankCard">
                    <div class="tier-badge" id="tierBadge">
                        <span class="tier-icon" id="tierIcon">üì∫</span>
                    </div>
                    <div class="rank-info">
                        <div class="tier-level">Level <span id="levelVal">1</span></div>
                        <div class="tier-name" id="tierName">The Casual Viewer</div>
                        <div class="tier-description" id="tierDescription">You watch movies to kill time.</div>
                    </div>
                    <div class="score-section">
                        <div class="score-item">
                            <div class="score-value" id="scoreVal">0</div>
                            <div class="score-label">Score</div>
                        </div>
                        <div class="score-item">
                            <div class="score-value"><span id="avgRating">‚òÜ</span></div>
                            <div class="score-label">Avg Rating</div>
                        </div>
                    </div>
                </div>

                <!-- 2. TOP 4 ANALYSIS BREAKDOWN -->
                <div class="analysis-section">
                    <h3>üìä Top 4 Analysis Breakdown</h3>
                    <div class="analysis-grid" id="analysisGrid"></div>
                </div>

                <!-- 3. WHY THIS RANK -->
                <div class="reasons-section">
                    <h3>üîç Why This Rank?</h3>
                    <ul id="reasonsList"></ul>
                </div>

                <!-- 4. YOUR TOP 4 FILMS -->
                <div class="movies-section">
                    <h3>üé• Your Top 4 Films</h3>
                    <div class="movie-grid" id="movieGrid"></div>
                </div>

                <!-- 5. WHY THIS TIER - Upgraded with progress bar -->
                <div class="tier-explanation-section">
                    <h3>üí° Why This Tier?</h3>
                    <p id="tierExplanation"></p>
                    <ul id="tierFactors" class="tier-factors-list"></ul>
                    <div class="level-progress">
                        <span class="level-label">Level 1</span>
                        <div class="level-progress-bar">
                            <div class="level-progress-fill" id="levelProgressFill"></div>
                            <span class="level-score" id="levelScoreDisplay">Score: 0/100</span>
                        </div>
                        <span class="level-label">Level 10</span>
                    </div>
                </div>

                <!-- 6. YOUR TASTE PROFILE -->
                <div class="taste-profile-section">
                    <h3>üé≠ Your Taste Profile</h3>
                    <div class="taste-profile-content">
                        <p class="taste-subtitle">What your Top 4 reveals:</p>
                        <p id="tasteDescription"></p>
                        <div class="taste-stats" id="tasteStats"></div>
                    </div>
                </div>

                <!-- 7. SCORE BREAKDOWN WITH PROGRESS BARS -->
                <div class="breakdown-section">
                    <h3>üìä Score Breakdown</h3>
                    <p class="breakdown-subtitle">How we calculated your score:</p>
                    <div class="score-breakdown" id="scoreBreakdown"></div>
                </div>
            </div>
        </div>

        <div class="pre-tiers-buttons">
            <a href="https://forms.gle/2arhuQwDaCs94Rn59" target="_blank" class="footer-btn feedback-btn">
                Send Feedback
            </a>
            <a href="https://buymeacoffee.com/siddhrajthakor" target="_blank" class="footer-btn coffee-btn">
                Buy me a coffee
            </a>
            <a href="https://github.com/siddhraj1412/top4theory" target="_blank" rel="noopener noreferrer" class="footer-btn github-btn" title="View source on GitHub">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" aria-hidden="true"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.387.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61-.546-1.387-1.333-1.757-1.333-1.757-1.09-.744.083-.729.083-.729 1.205.084 1.84 1.236 1.84 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.418-1.305.762-1.605-2.665-.3-5.467-1.332-5.467-5.93 0-1.31.468-2.381 1.236-3.221-.124-.303-.536-1.523.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.655 1.653.243 2.873.12 3.176.77.84 1.235 1.911 1.235 3.221 0 4.61-2.807 5.625-5.479 5.921.43.371.823 1.102.823 2.222 0 1.606-.015 2.896-.015 3.286 0 .319.216.694.825.576C20.565 22.092 24 17.592 24 12.297 24 5.67 18.627.297 12 .297z"/></svg>
                View on GitHub
            </a>
            <a href="https://medium.com/@siddhraj761/i-tested-this-with-an-algorithm-to-see-what-four-films-reveal-about-taste-identity-and-0bfc8466e1d7" target="_blank" rel="noopener noreferrer" class="footer-btn feedback-btn blog-btn" title="Read the blog">
                <!-- Medium 'M' logo (keeps small icon + text consistent with other buttons) -->
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" aria-hidden="true">
                    <path d="M2.5 3.5v17h3l4.5-9.8L14.5 20h3V3.5h-3l-4.5 9.8L5.5 3.5h-3z" />
                </svg>
                Blog
            </a>
        </div>

        <div class="tiers-section">
            <h2>üèÜ The 10-Level Cinema Hierarchy</h2>
            <div class="tiers-grid" id="tiersGrid">
                <div class="tier-item" style="--tier-color: #6c757d">
                    <span class="tier-num">1</span>
                    <span class="tier-emoji">üì∫</span>
                    <span class="tier-title">The Casual Viewer</span>
                </div>
                <div class="tier-item" style="--tier-color: #fd7e14">
                    <span class="tier-num">2</span>
                    <span class="tier-emoji">üçø</span>
                    <span class="tier-title">The Popcorn Enthusiast</span>
                </div>
                <div class="tier-item" style="--tier-color: #20c997">
                    <span class="tier-num">3</span>
                    <span class="tier-emoji">üéüÔ∏è</span>
                    <span class="tier-title">The Avid Watcher</span>
                </div>
                <div class="tier-item" style="--tier-color: #0dcaf0">
                    <span class="tier-num">4</span>
                    <span class="tier-emoji">üåä</span>
                    <span class="tier-title">The Eclectic Explorer</span>
                </div>
                <div class="tier-item" style="--tier-color: #6f42c1">
                    <span class="tier-num">5</span>
                    <span class="tier-emoji">ü•É</span>
                    <span class="tier-title">The Dedicated Cinephile</span>
                </div>
                <div class="tier-item" style="--tier-color: #d63384">
                    <span class="tier-num">6</span>
                    <span class="tier-emoji">üé©</span>
                    <span class="tier-title">The Refined Curator</span>
                </div>
                <div class="tier-item" style="--tier-color: #ffc107">
                    <span class="tier-num">7</span>
                    <span class="tier-emoji">üç∑</span>
                    <span class="tier-title">The Cinema Connoisseur</span>
                </div>
                <div class="tier-item" style="--tier-color: #198754">
                    <span class="tier-num">8</span>
                    <span class="tier-emoji">üéûÔ∏è</span>
                    <span class="tier-title">The Elite Cinephile</span>
                </div>
                <div class="tier-item" style="--tier-color: #dc3545">
                    <span class="tier-num">9</span>
                    <span class="tier-emoji">üëÅÔ∏è</span>
                    <span class="tier-title">The Master Curator</span>
                </div>
                <div class="tier-item legendary" style="--tier-color: #ffd700">
                    <span class="tier-num">10</span>
                    <span class="tier-emoji">üèÜ</span>
                    <span class="tier-title">The Cinema Deity</span>
                </div>
            </div>
        </div>

        <footer class="footer">
            <div class="footer-content">
                <p class="footer-note">Rating shown is out of 5 stars (multiply by 2 for TMDB's /10 scale)</p>
                <p class="footer-credits">Built with ‚ù§Ô∏è by <a href="https://letterboxd.com/SiddhrajThakor/" target="_blank" class="footer-link">@SiddhrajThakor</a> | Data from TMDB</p>
            </div>
        </footer>
    </div>
    
    <script src="script.js"></script>
</body>
</html>
